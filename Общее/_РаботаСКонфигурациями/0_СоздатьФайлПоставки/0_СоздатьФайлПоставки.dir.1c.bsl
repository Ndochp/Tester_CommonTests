// Производит запуск конфигуратора
// Параметры:
// Структура, Создать файл поставки.Параметры

// *********************************************
// Изменяемые параметры каждого файла поставки
// *********************************************

НомерВерсии = "1.4.8.412";

МассивОбновляемых = Новый Массив;
МассивОбновляемых.Добавить ( "1.4.8.411" );
МассивОбновляемых.Добавить ( "1.4.8.410" );

// *********************************************
// Постоянные параметры файлов поставки
// *********************************************
  
ПутьКПлатформе = Вызвать ( "_РаботаСКонфигурациями.ПутьЗапуска1С" );

п = Вызвать ( "_РаботаСКонфигурациями.СоздатьФайлПоставки.Параметры" );
п.Пользователь = "Администратор";
//п.Пароль = "";
п.База = "База 1С"; // Имя ИБ как она названа в списке баз стартера 1С
п.КаталогСборки = "c:\1С\Поставки 2017"; // Путь к каталогу сборки
п.КаталогХранилища = "c:\1c_Repo"; // Путь к каталогу хранилища конфигурации
п.ПарольХранилища = "1"; // Пароль хранилища конфигурации
п.ПользовательХранилища = "Администратор"; // Администратор хранилища конфигурации
п.НомерВерсии = НомерВерсии; // Номер поставляемой версии 
п.ОбновляемыеВерсии = МассивОбновляемых; // Массив версий для обновления 
//п.Ждать = 15; // Кол-во секунд ожидания запуска 1С
//п.Параметры = "/Visible"; // Прочие параметры запуска
п.Вставить ( "ПутьКПлатформе", путькплатформе );
	
команда = СоздатьКомандуЗапуска ( п );

Если команда = Неопределено Тогда
	Возврат;
КонецЕсли;

Сообщить (команда);

КодВозврата = "";
ЗапуститьПриложение ( команда, , Истина, КодВозврата );

Сообщить(КодВозврата);

Функция СоздатьКомандуЗапуска ( _ )

	команда = _.ПутьКПлатформе + " DESIGNER";

	п = _.База;
	если ( п <> undefined ) тогда
		команда = команда + " /IBName """ + п + """";
	конецесли;

	п = _.Пользователь;
	если ( п <> undefined ) тогда
		команда = команда + " /N """ + п + """";
	конецесли;

	п = _.Пароль;
	если ( п <> undefined ) тогда
		команда = команда + " /P """ + п + """";
	конецесли;
	
	к = _.КаталогХранилища;
	если ( к <> undefined ) тогда
		
		п = _.ПользовательХранилища;
		если ( п <> undefined ) тогда
			команда = команда + " /ConfigurationRepositoryN """ + п + """";
		конецесли;
		
		п = _.ПарольХранилища;
		если ( п <> undefined ) тогда
			команда = команда + " /ConfigurationRepositoryP """ + п + """";
		конецесли;
		
		команда = команда + " /ConfigurationRepositoryF """ + к + """";
	конецесли;
	
	ФайлПоставки = _.КаталогСборки + "\" + _.НомерВерсии + "\1Cv8.cf";
	команда = команда + " /CreateDistributionFiles -cffile """ + ФайлПоставки + """";
	
	ФайлОбновления = ФайлПоставки + "u";
	команда = команда + " -cfufile """ + ФайлОбновления + """";

	Для Каждого Версия Из _.ОбновляемыеВерсии Цикл
		ФайлВерсии = _.КаталогСборки + "\" + Версия + "\1Cv8.cf";
		команда = команда + " -f """ + ФайлВерсии + """";
	КонецЦикла;
	
	п = _.Параметры;
	если ( п <> undefined ) тогда
		команда = команда + " " + п;
	конецесли;
	
	Возврат Команда;
КонецФункции



